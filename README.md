# Документация проекта для анализа и визуализации данных об акциях

## Общий обзор

Этот проект предназначен для загрузки исторических данных об акциях и их визуализации. Он использует библиотеку yfinance
для получения данных и matplotlib для создания графиков. Пользователи могут выбирать различные тикеры и временные
периоды для анализа, а также просматривать движение цен и скользящие средние на графике, расчитывать и отображать на
графике дополнительные технические индикаторы (RSI, MACD, Стандартное отклонение)

## Структура и модули проекта

```
/Analysis-and-visualization-of-stock-quotes
├── main.py
├── data_download.py
├── data_plotting.py
└── tests
    ├── test_data_download.py
    └── test_data_plotting.py
```

### 1. main.py:

- Является точкой входа в программу.

- Запрашивает у пользователя тикер акции и временной период, загружает данные, обрабатывает их и выводит результаты в
  виде графиков, а также записывает данные в CSV файл.

### 2. data_download.py:

- Отвечает за загрузку данных об акциях.

- Содержит функции для извлечения данных об акциях из интернета, расчёта:
    - скользящего среднего,
    - средней цены закрытия акций за заданный период,
    - стандартного отклонения цены закрытия акций,
    - вывода уведомления о сильных колебаниях цены акции,
    - записи данных в CSV файл,
    - расчета дополнительных технических индикаторов (RSI, MACD)

### 3. data_plotting.py:

- Отвечает за визуализацию данных.

- Содержит функции для создания, сохранения и отображения в браузере (интерактивно) графиков цены закрытия, скользящих средних, стандартного отклонения,
  дополнительных технических индикаторов RSI и MACD.

## Описание функций

### 1. main.py:

- main(): Основная функция, управляющая процессом загрузки, обработки данных и их визуализации. Запрашивает у
  пользователя ввод данных, вызывает функции загрузки и обработки данных, а затем передаёт результаты на визуализацию и
  выводит в консоль среднюю цену закрытия акций за заданный период, а также записывает данные в CSV файл.

### 2. data_download.py:

- fetch_stock_data(ticker, period): Получает исторические данные об акциях для указанного тикера и временного периода.
  Возвращает DataFrame с данными.

- add_moving_average(data, window_size): Добавляет в DataFrame колонку со скользящим средним, рассчитанным на основе цен
  закрытия.

- def calculate_and_display_average_price(data, ticker): Функция вычисляет и выводит в консоль среднюю цену закрытия
  акций за заданный период.

- def notify_if_strong_fluctuations(data, ticker, threshold=5): Функция вычисляет максимальное и минимальное значения
  цены закрытия и сравнивает с заданным порогом (по умолчанию порог threshold=5). Если разница превышает порог,
  пользователь получит уведомление.

- def export_data_to_csv(data, filename): Функция принимает DataFrame и имя файла, после чего сохраняет данные
  в указанный CSV файл.

- def calculate_rsi(data, window_size=14): Функция принимает DataFrame, кол-во наблюдений и вычисляет RSI.

- def calculate_macd(data, short_window=12, long_window=26, signal_window=9): Функция принимает DataFrame, значения окон
  и вычисляет MACD (Moving Average Convergence Divergence) и линию сигнала для заданных данных о цене закрытия акций.

- def calculate_standard_deviation(data): Функция принимает DataFrame и вычисляет стандартное отклонение цены закрытия
  акций за выбранный период

### 3. data_plotting.py:

- def create_and_save_plot(data, ticker, period, start_date, end_date, std_deviation, style=None, filename=None):
  Функция создаёт график, отображающий цены закрытия, скользящие средние, дополнительные технические индикаторы (RSI, MACD,
  Стандартное отклонение).
  Предоставляет возможность сохранения графика в файл. Параметр filename опционален; если он не указан, имя файла
  генерируется автоматически. У пользователя есть возможность выбрать стиль графика.

- def create_and_show_plot(data: pd.DataFrame, ticker: str, std_deviation: float): Функция создает и отображает в
  браузере интерактивные графики цен акций, скользящего среднего, стандартного отклонения, RSI и MACD для указанного
  тикера.

## Пошаговое использование

1. Запустите main.py.

2. Введите интересующий вас тикер акции (например, 'AAPL' для Apple Inc).

3. Введите желаемый временной период для анализа (например, '1mo' для данных за один месяц), либо пропустите (enter) и
   укажите конкретные даты начала и окончания для анализа.
4. Выберите стиль графика (например, 'classic', 'ggplot', 'bmh', 'fivethirtyeight'), либо пропустите (enter) и график
   будет выбран стандартный по умолчанию

5. Программа обработает введённые данные, загрузит соответствующие данные об акциях, рассчитает скользящее среднее,
   дополнительные технические индикаторы (RSI, MACD) и отобразит графики, а также запишет дынные в CSV файл.

# Тесты

## Модуль test_data_download.py

### Описание

Модуль test_data_download.py содержит набор тестов для проверки функциональности функций, связанных с загрузкой данных о
ценных бумагах и их обработкой.

### Список тестов

1. test_fetch_stock_data: Тест проверяет функцию fetch_stock_data, которая загружает данные о ценных бумагах и
   возвращает DataFrame.
2. test_add_moving_average: Тест проверяет функцию add_moving_average, которая добавляет скользящее среднее к DataFrame
   с ценами.
3. test_calculate_and_display_average_price: Тест проверяет функцию calculate_and_display_average_price, которая
   вычисляет и отображает среднюю цену.
4. test_notify_if_strong_fluctuations: Тест проверяет функцию notify_if_strong_fluctuations, которая уведомляет о
   сильных колебаниях цены.
5. test_export_data_to_csv: Тест проверяет функцию export_data_to_csv, которая экспортирует данные в CSV файл.
6. test_calculate_rsi: Тест проверяет функцию calculate_rsi, которая вычисляет индекс относительной силы (RSI).
7. test_calculate_macd: Тест проверяет функцию calculate_macd, которая вычисляет MACD и сигнальную линию.
8. test_calculate_standard_deviation(self): Тест проверяет функцию calculate_standard_deviation, которая вычисляет
   стандартное отклонение цены закрытия акций